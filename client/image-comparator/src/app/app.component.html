<div *ngIf="loading()" class="text-center bg-gray-200">
  <app-spinner-component></app-spinner-component>
  <div class="-mt-[10.5rem]">
    Comparando un total de {{ totalImages() }} imágenes...
  </div>
</div>

<div *ngIf="!loading()">
  <h1 class="text-3xl font-bold text-blue-600">Comparador de imágenes</h1>

  <form (submit)="onSubmit($event)">
    <label>
      Carpeta 1:
      <input
        type="file"
        webkitdirectory
        directory
        multiple
        (change)="onFolderSelect($event, 1)"
      />
    </label>
    <br />
    <label>
      Carpeta 2:
      <input
        type="file"
        webkitdirectory
        directory
        multiple
        (change)="onFolderSelect($event, 2)"
      />
    </label>
    <br /><br />
    <button
      type="submit"
      class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2"
    >
      Comparar imágenes
    </button>
  </form>

  <hr />

  <app-datatable-component [imageData]="results"></app-datatable-component>

  <table *ngIf="results.length">
    <thead>
      <tr>
        <th>Imagen carpeta 1</th>
        <th>Imagen carpeta 2</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let pair of results">
        <td>
          <strong>{{ pair.img1.name }}</strong
          ><br />
          Tamaño: {{ pair.img1.size }} bytes
        </td>
        <td>
          <strong>{{ pair.img2.name }}</strong
          ><br />
          Tamaño: {{ pair.img2.size }} bytes
        </td>
      </tr>
    </tbody>
  </table>
</div>
